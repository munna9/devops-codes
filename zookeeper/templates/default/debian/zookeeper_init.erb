#! /bin/sh
### BEGIN INIT INFO
# Provides:           <%=node['zookeeper']['service']['name']%>
# Required-Start:     $remote_fs $network
# Required-Stop:      $remote_fs $network
# Default-Start:      2 3 4 5
# Default-Stop:       0 1 6
# Short-Description:  Start a chef-client.
### END INIT INFO
#
# Copyright (c) 2009-2010 Opscode, Inc, legal_at_opscode.com
#
# chef-client         Startup script for chef-client.
# chkconfig: - 99 02
# description: starts up chef-client in daemon mode.

DAEMON=<%=node['zookeeper']['app']['home_directory']%>/bin/zkServer.sh
NAME=<%=node['zookeeper']['service']['name']%>
DESC=<%=node['zookeeper']['service']['name']%>
PIDFILE=<%=node['zookeeper']['conf']['dataDir']%>/zookeeper_server.pid

    errcode=$?

case "$1" in
  start|stop|restart|status)
    ZK_CMD="$1"
    ;;
  *)
    echo "Usage: $0 {start|stop|restart|status}"
    exit
esac
. /<%=node['zookeeper']['service']['conf_file']%>
"$DAEMON" "$ZK_CMD"
exit 0