{
  "name": "elk-elasticsearch",
  "json_class": "Chef::Role",
  "chef_type": "role",
  "description": "Recipes which configures host to be elasticsearch server",
  "default_attributes": {
    "elk_cluster_name": "elk"
  },
  "override_attributes": {
    "elasticsearch":{
      "package":{
        "version": "5.4.1-1"
      }
    }

  },
  "run_list": [
    "role[_base]",
    "role[_elk-agent]",
    "recipe[basic-essentials::elastic_repo]",
    "recipe[basic-essentials::oracle_java_default]",
    "recipe[basic-essentials::install_pip]",
    "recipe[basic-essentials::gitclient]",
    "recipe[elasticsearch::install]",
    "recipe[elasticsearch::configure]",
    "recipe[elasticsearch::curator]",
    "recipe[nginx::install]",
    "recipe[nginx::service]",
    "recipe[elasticsearch::service]"
  ],
  "env_run_lists": {
    "prod-cpapp":[
      "role[_base]",
      "recipe[basic-essentials::elastic_repo]",
      "recipe[basic-essentials::oracle_java_default]",
      "recipe[elasticsearch::install_from_repo]",
      "recipe[elasticsearch::configure]",
      "recipe[nginx::install]",
      "recipe[nginx::service]",
      "recipe[elasticsearch::service]"
    ],
    "qa":[
      "role[_base]",
      "recipe[basic-essentials::elastic_repo]",
      "recipe[basic-essentials::oracle_java_default]",
      "recipe[elasticsearch::install_from_repo]",
      "recipe[elasticsearch::elk_cluster_configure]",
      "recipe[elasticsearch::curator]",
      "recipe[nginx::install]",
      "recipe[nginx::service]",
      "recipe[elasticsearch::service]"
    ]
  }
}